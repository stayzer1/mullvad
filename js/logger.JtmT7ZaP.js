import{e as N}from"./public.WXkmOSj2.js";import{g as R}from"./_commonjsHelpers.BosuxZz1.js";var k={exports:{}};function G(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}var K=H;function H(e,t,n){var i=n&&n.stringify||G,s=1;if(typeof e=="object"&&e!==null){var u=t.length+s;if(u===1)return e;var b=new Array(u);b[0]=i(e);for(var c=1;c<u;c++)b[c]=i(t[c]);return b.join(" ")}if(typeof e!="string")return e;var f=t.length;if(f===0)return e;for(var r="",a=1-s,l=-1,h=e&&e.length||0,o=0;o<h;){if(e.charCodeAt(o)===37&&o+1<h){switch(l=l>-1?l:0,e.charCodeAt(o+1)){case 100:case 102:if(a>=f||t[a]==null)break;l<o&&(r+=e.slice(l,o)),r+=Number(t[a]),l=o+2,o++;break;case 105:if(a>=f||t[a]==null)break;l<o&&(r+=e.slice(l,o)),r+=Math.floor(Number(t[a])),l=o+2,o++;break;case 79:case 111:case 106:if(a>=f||t[a]===void 0)break;l<o&&(r+=e.slice(l,o));var p=typeof t[a];if(p==="string"){r+="'"+t[a]+"'",l=o+2,o++;break}if(p==="function"){r+=t[a].name||"<anonymous>",l=o+2,o++;break}r+=i(t[a]),l=o+2,o++;break;case 115:if(a>=f)break;l<o&&(r+=e.slice(l,o)),r+=String(t[a]),l=o+2,o++;break;case 37:l<o&&(r+=e.slice(l,o)),r+="%",l=o+2,o++,a--;break}++a}++o}return l===-1?e:(l<h&&(r+=e.slice(l)),r)}const D=K;k.exports=v;const z=ae().console||{},U={mapHttpRequest:L,mapHttpResponse:L,wrapRequestSerializer:S,wrapResponseSerializer:S,wrapErrorSerializer:S,req:L,res:L,err:M,errWithCause:M};function y(e,t){return e==="silent"?1/0:t.levels.values[e]}const F=Symbol("pino.logFuncs"),T=Symbol("pino.hierarchy"),W={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function I(e,t){const n={logger:t,parent:e[T]};t[T]=n}function $(e,t,n){const i={};t.forEach(s=>{i[s]=n[s]?n[s]:z[s]||z[W[s]||"log"]||w}),e[F]=i}function J(e,t){return Array.isArray(e)?e.filter(function(i){return i!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function v(e){e=e||{},e.browser=e.browser||{};const t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");const n=e.browser.write||z;e.browser.write&&(e.browser.asObject=!0);const i=e.serializers||{},s=J(e.browser.serialize,i);let u=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(u=!1);const b=Object.keys(e.customLevels||{}),c=["error","fatal","warn","info","debug","trace"].concat(b);typeof n=="function"&&c.forEach(function(m){n[m]=n}),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");const f=e.level||"info",r=Object.create(n);r.log||(r.log=w),$(r,c,n),I({},r),Object.defineProperty(r,"levelVal",{get:l}),Object.defineProperty(r,"level",{get:h,set:o});const a={transmit:t,serialize:s,asObject:e.browser.asObject,formatters:e.browser.formatters,levels:c,timestamp:ne(e),messageKey:e.messageKey||"msg",onChild:e.onChild||w};r.levels=Q(e),r.level=f,r.setMaxListeners=r.getMaxListeners=r.emit=r.addListener=r.on=r.prependListener=r.once=r.prependOnceListener=r.removeListener=r.removeAllListeners=r.listeners=r.listenerCount=r.eventNames=r.write=r.flush=w,r.serializers=i,r._serialize=s,r._stdErrSerialize=u,r.child=function(...m){return p.call(this,a,...m)},t&&(r._logEvent=C());function l(){return y(this.level,this)}function h(){return this._level}function o(m){if(m!=="silent"&&!this.levels.values[m])throw Error("unknown level "+m);this._level=m,g(this,a,r,"error"),g(this,a,r,"fatal"),g(this,a,r,"warn"),g(this,a,r,"info"),g(this,a,r,"debug"),g(this,a,r,"trace"),b.forEach(d=>{g(this,a,r,d)})}function p(m,d,O){if(!d)throw new Error("missing bindings for child Pino");O=O||{},s&&d.serializers&&(O.serializers=d.serializers);const A=O.serializers;if(s&&A){var E=Object.assign({},i,A),x=e.browser.serialize===!0?Object.keys(E):s;delete d.serializers,V([d],x,E,this._stdErrSerialize)}function P(_){this._childLevel=(_._childLevel|0)+1,this.bindings=d,E&&(this.serializers=E,this._serialize=x),t&&(this._logEvent=C([].concat(_._logEvent.bindings,d)))}P.prototype=this;const j=new P(this);return I(this,j),j.child=function(..._){return p.call(this,m,..._)},j.level=O.level||this.level,m.onChild(j),j}return r}function Q(e){const t=e.customLevels||{},n=Object.assign({},v.levels.values,t),i=Object.assign({},v.levels.labels,X(t));return{values:n,labels:i}}function X(e){const t={};return Object.keys(e).forEach(function(n){t[e[n]]=n}),t}v.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};v.stdSerializers=U;v.stdTimeFunctions=Object.assign({},{nullTime:q,epochTime:B,unixTime:ie,isoTime:se});function Y(e){const t=[];e.bindings&&t.push(e.bindings);let n=e[T];for(;n.parent;)n=n.parent,n.logger.bindings&&t.push(n.logger.bindings);return t.reverse()}function g(e,t,n,i){if(Object.defineProperty(e,i,{value:y(e.level,n)>y(i,n)?w:n[F][i],writable:!0,enumerable:!0,configurable:!0}),e[i]===w){if(!t.transmit)return;const u=t.transmit.level||e.level,b=y(u,n);if(y(i,n)<b)return}e[i]=ee(e,t,n,i);const s=Y(e);s.length!==0&&(e[i]=Z(s,e[i]))}function Z(e,t){return function(){return t.apply(this,[...e,...arguments])}}function ee(e,t,n,i){return function(s){return function(){const b=t.timestamp(),c=new Array(arguments.length),f=Object.getPrototypeOf&&Object.getPrototypeOf(this)===z?z:this;for(var r=0;r<c.length;r++)c[r]=arguments[r];var a=!1;if(t.serialize&&(V(c,this._serialize,this.serializers,this._stdErrSerialize),a=!0),t.asObject||t.formatters?s.call(f,te(this,i,c,b,t)):s.apply(f,c),t.transmit){const l=t.transmit.level||e._level,h=y(l,n),o=y(i,n);if(o<h)return;re(this,{ts:b,methodLevel:i,methodValue:o,transmitLevel:l,transmitValue:n.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:y(e._level,n)},c,a)}}}(e[F][i])}function te(e,t,n,i,s){const{level:u,log:b=h=>h}=s.formatters||{},c=n.slice();let f=c[0];const r={};if(i&&(r.time=i),u){const h=u(t,e.levels.values[t]);Object.assign(r,h)}else r.level=e.levels.values[t];let a=(e._childLevel|0)+1;if(a<1&&(a=1),f!==null&&typeof f=="object"){for(;a--&&typeof c[0]=="object";)Object.assign(r,c.shift());f=c.length?D(c.shift(),c):void 0}else typeof f=="string"&&(f=D(c.shift(),c));return f!==void 0&&(r[s.messageKey]=f),b(r)}function V(e,t,n,i){for(const s in e)if(i&&e[s]instanceof Error)e[s]=v.stdSerializers.err(e[s]);else if(typeof e[s]=="object"&&!Array.isArray(e[s])&&t)for(const u in e[s])t.indexOf(u)>-1&&u in n&&(e[s][u]=n[u](e[s][u]))}function re(e,t,n,i=!1){const s=t.send,u=t.ts,b=t.methodLevel,c=t.methodValue,f=t.val,r=e._logEvent.bindings;i||V(n,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=u,e._logEvent.messages=n.filter(function(a){return r.indexOf(a)===-1}),e._logEvent.level.label=b,e._logEvent.level.value=c,s(b,e._logEvent,f),e._logEvent=C(r)}function C(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function M(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const n in e)t[n]===void 0&&(t[n]=e[n]);return t}function ne(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?q:B}function L(){return{}}function S(e){return e}function w(){}function q(){return!1}function B(){return Date.now()}function ie(){return Math.round(Date.now()/1e3)}function se(){return new Date(Date.now()).toISOString()}function ae(){function e(t){return typeof t<"u"&&t}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}k.exports.default=v;k.exports.pino=v;var oe=k.exports;const le=R(oe),{PUBLIC_LOG_LEVEL:ce="info"}=N,be=le({level:ce,transport:{target:"pino-pretty",options:{ignore:"pid,hostname"}}});export{be as l};
